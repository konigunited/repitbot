# Environment Configuration for RepitBot Microservices
# Copy this file to .env and configure your values

# =============================================================================
# GENERAL SETTINGS
# =============================================================================
ENVIRONMENT=development
VERSION=1.0.0
DEBUG=true

# =============================================================================
# DATABASE SETTINGS
# =============================================================================
# PostgreSQL Database
POSTGRES_DB=repitbot_dev
POSTGRES_USER=repitbot
POSTGRES_PASSWORD=repitbot_dev_password_change_me

# Database URLs (auto-generated from above, but can be overridden)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# Database Pool Settings
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# REDIS SETTINGS
# =============================================================================
REDIS_PASSWORD=repitbot_redis_password_change_me
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379
REDIS_DB=0

# =============================================================================
# MESSAGE BROKER SETTINGS (RabbitMQ)
# =============================================================================
RABBITMQ_USER=repitbot
RABBITMQ_PASSWORD=repitbot_rabbit_password_change_me
RABBITMQ_VHOST=repitbot
RABBITMQ_ERLANG_COOKIE=repitbot_erlang_cookie_change_me
MESSAGE_BROKER_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASSWORD}@rabbitmq:5672/${RABBITMQ_VHOST}

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your_main_secret_key_change_me_32_chars_min
JWT_SECRET_KEY=your_jwt_secret_key_change_me_32_chars
JWT_REFRESH_SECRET_KEY=your_jwt_refresh_secret_key_change_me

# Service-specific secret keys
USER_SERVICE_SECRET_KEY=user_service_secret_key_change_me
AUTH_SERVICE_SECRET_KEY=auth_service_secret_key_change_me
LESSON_SERVICE_SECRET_KEY=lesson_service_secret_key_change_me
HOMEWORK_SERVICE_SECRET_KEY=homework_service_secret_key_change_me
PAYMENT_SERVICE_SECRET_KEY=payment_service_secret_key_change_me
NOTIFICATION_SERVICE_SECRET_KEY=notification_service_secret_key_change_me
MATERIAL_SERVICE_SECRET_KEY=material_service_secret_key_change_me
ANALYTICS_SERVICE_SECRET_KEY=analytics_service_secret_key_change_me
ACHIEVEMENT_SERVICE_SECRET_KEY=achievement_service_secret_key_change_me
SCHEDULER_SERVICE_SECRET_KEY=scheduler_service_secret_key_change_me
TELEGRAM_BOT_SECRET_KEY=telegram_bot_secret_key_change_me

# =============================================================================
# TELEGRAM SETTINGS
# =============================================================================
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_from_botfather
TELEGRAM_WEBHOOK_URL=https://your-domain.com/webhook

# =============================================================================
# API GATEWAY SETTINGS
# =============================================================================
API_GATEWAY_PORT=80
API_GATEWAY_SSL_PORT=443
LOAD_BALANCER_HTTP_PORT=80
LOAD_BALANCER_HTTPS_PORT=443
LOAD_BALANCER_STATS_PORT=8404

# =============================================================================
# MONITORING SETTINGS
# =============================================================================
# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=repitbot_grafana_password_change_me

# Prometheus (usually no auth needed for internal use)
PROMETHEUS_PORT=9090

# Jaeger (usually no auth needed)
JAEGER_PORT=16686

# =============================================================================
# LOGGING SETTINGS
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# =============================================================================
# CORS SETTINGS
# =============================================================================
CORS_ORIGINS=*
CORS_CREDENTIALS=true
CORS_METHODS=*
CORS_HEADERS=*

# =============================================================================
# SERVICE DISCOVERY (Optional - for Consul)
# =============================================================================
CONSUL_HOST=consul
CONSUL_PORT=8500
CONSUL_TOKEN=your_consul_token_if_needed

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# Email service (if needed)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_email_password
SMTP_TLS=true

# SMS service (if needed)
SMS_API_KEY=your_sms_api_key
SMS_API_URL=https://api.sms-service.com

# File storage (if using external storage)
AWS_ACCESS_KEY_ID=your_aws_key
AWS_SECRET_ACCESS_KEY=your_aws_secret
AWS_REGION=us-east-1
AWS_S3_BUCKET=repitbot-files

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Set to true to enable additional development features
DEVELOPMENT_MODE=true

# Auto-reload services on code changes (development only)
AUTO_RELOAD=true

# Show SQL queries in logs (development only)
SHOW_SQL_QUERIES=false

# Enable debug toolbar (development only)
DEBUG_TOOLBAR=false

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
# Worker processes per service
WORKERS_USER_SERVICE=2
WORKERS_AUTH_SERVICE=2
WORKERS_LESSON_SERVICE=2
WORKERS_HOMEWORK_SERVICE=2
WORKERS_PAYMENT_SERVICE=1
WORKERS_NOTIFICATION_SERVICE=3
WORKERS_MATERIAL_SERVICE=1
WORKERS_ANALYTICS_SERVICE=1
WORKERS_ACHIEVEMENT_SERVICE=1
WORKERS_SCHEDULER_SERVICE=1

# Cache TTL (seconds)
CACHE_TTL=300
CACHE_PREFIX=repitbot

# =============================================================================
# BACKUP SETTINGS
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_ACHIEVEMENTS=true
FEATURE_ANALYTICS=true
FEATURE_NOTIFICATIONS=true
FEATURE_FILE_UPLOADS=true
FEATURE_PAYMENTS=true

# =============================================================================
# BUSINESS LOGIC SETTINGS
# =============================================================================
# Default lesson duration in minutes
DEFAULT_LESSON_DURATION=60

# Points system
POINTS_PER_LESSON=10
POINTS_PER_HOMEWORK=5
STREAK_MULTIPLIER=1.5

# Payment settings
CURRENCY=RUB
PAYMENT_METHODS=cash,card,transfer

# File upload settings
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_EXTENSIONS=jpg,jpeg,png,pdf,doc,docx

# Homework settings
DEFAULT_HOMEWORK_DEADLINE_DAYS=7

# Notification settings
MAX_NOTIFICATION_RETRIES=3
NOTIFICATION_RETRY_DELAY_SECONDS=60
NOTIFICATION_BATCH_SIZE=100

# =============================================================================
# TESTING SETTINGS
# =============================================================================
# Test database (for running tests)
TEST_DATABASE_URL=sqlite:///./test_repitbot.db

# =============================================================================
# SSL/TLS SETTINGS (for production)
# =============================================================================
SSL_CERT_PATH=/etc/ssl/certs/repitbot.crt
SSL_KEY_PATH=/etc/ssl/private/repitbot.key
SSL_CA_PATH=/etc/ssl/certs/ca.crt

# =============================================================================
# NOTES
# =============================================================================
# 1. Change all "change_me" passwords before deploying to production
# 2. Use strong, unique passwords for each service
# 3. Keep this file secure and never commit it to version control
# 4. Use environment-specific .env files (.env.development, .env.production, etc.)
# 5. Consider using secrets management tools for production deployments